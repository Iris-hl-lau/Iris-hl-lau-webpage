<!DOCTYPE html>
<html>
<head>
    <title>Quiz Admin</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../../../../Style/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../../../Style/style.css">
    <script src="../../../../Javascript/jquery-3.2.1.min.js"></script>
</head>
<body>
    
    <script>
        let labelQNo = document.createElement("LABEL");
        labelQNo.innerHTML = "Enter the number of questions to create:&nbsp";
        labelQNo.value = "Enter the number of questions to create:";
        labelQNo.htmlFor = "qNo";
        document.body.appendChild(labelQNo);

        let qNoInput = document.createElement("INPUT");
        qNoInput.id = "qNoInput";
        qNoInput.type = "text";
        document.body.appendChild(qNoInput);

        let qNoBtn = document.createElement("BUTTON");
        qNoBtn.type = "button";
        qNoBtn.id = "btnOK";
        qNoBtn.onclick = function(event) {
            qNo = Number(document.getElementById("qNoInput").value);
            generateQForm(qNo);
        };
        qNoBtn.innerHTML = "OK";
        document.body.appendChild(qNoBtn);
        
        let form = new Array();

        function createLabel(labelName, i) {
            linebreak();
            linebreak();
            let label = document.createElement("LABEL");
            label.innerHTML = labelName;
            label.value = labelName;
            label.htmlFor = String(labelName + i);
            document.body.appendChild(label);
            linebreak();
        }
        
        function createTextArea() {
            let textbox = document.createElement("TEXTAREA");
            //move to css
            textbox.rows = 2;
            textbox.cols = 50;
            textbox.style = "resize: none";
            //
            document.body.appendChild(textbox);
        }

        function linebreak() {
            document.body.appendChild(document.createElement("BR"));
        }

        function createRadioBtn(num) {
            let radioBtn = document.createElement("INPUT");
            radioBtn.type = "radio";
            radioBtn.name = String("multipleChoice" + num);
            document.body.appendChild(radioBtn);
        }

        function createTextInput() {
            let textInput = document.createElement("INPUT");
            textInput.type = "text";
            document.body.appendChild(textInput);
        }

        function generateQForm(questionNo) {
            let form = document.createElement("FORM");
                form.className = String("Form");
                linebreak();

            for(let i = 0; i < questionNo; i++) {
                createLabel("Question Text*");
                createTextArea();
                createLabel("Answers*");

                for(let j = 0; j <= 3; j++) {
                    createRadioBtn(i);
                    createTextInput();
                    linebreak();
                }
                linebreak();
            }
            btnSubmit();
            document.body.appendChild(form);
            
        }
        function btnSubmit() {
            let btn_submit = document.createElement("INPUT");
            btn_submit.type = "submit";
            btn_submit.value = "Submit";
            btn_submit.onclick = function(event) {
                storeQuiz();
            };
            document.body.appendChild(btn_submit);
        }

        function storeQuiz() {
            // const quiz = document.getElementsByClassName("Form");
            $.fn.serializeObject = function() {
                var formInputs = {};
                var item = this.serializeArray();
                $.each(item, function() {
                    if (formInputs[this.name] !== undefined) {
                        if (!formInputs[this.name].push) {
                            formInputs[this.name] = [formInputs[this.name]];
                        }
                        formInputs[this.name].push(this.value || '');
                    } else {
                        formInputs[this.name] = this.value || '';
                    }
                });
                return formInputs;
            };

            $(function() {
                $('form').submit(function() {
                    $('#result').text(JSON.stringify($('form').serializeObject()));
                    return false;
                });
            });
        }

        // function retrieveQuiz() {

        // }
    </script>
</body>
</html>

